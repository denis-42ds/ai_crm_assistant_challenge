# AI-ассистент для CRM

Это гибкое AI-решение, которое автоматизирует рутинные задачи в CRM, используя мощь больших языковых моделей. Проект включает четыре независимых ассистента, реализованных в виде модульных микросервисов на **FastAPI** и упакованных в **Docker-контейнер** для лёгкого развёртывания.

---
### 1. Проблема

Менеджеры по продажам тратят значительное время на рутинные задачи, такие как **классификация входящих лидов**, **ручное заполнение карточек клиентов**, **ведение подробных заметок** и **мониторинг рисков**. Это приводит к задержкам в обработке самых перспективных клиентов и снижает общую эффективность работы с базой.

---
### 2. Решение

Наш AI-ассистент автоматизирует эти процессы, позволяя менеджерам сосредоточиться на прямых продажах.

#### **Ассистент 1: Приоритизация лидов**
Анализирует текст входящей заявки и мгновенно присваивает ей тег **«Горячий»**, **«Тёплый»** или **«Холодный»**, обеспечивая мгновенную приоритизацию.

#### **Ассистент 2: Автозаполнение карточки клиента**
Извлекает из текста (заметок, писем) ключевую информацию, такую как имя, название компании и email, и возвращает её в структурированном виде для автоматического заполнения полей.

#### **Ассистент 3: Редактирование заметок**
Исправляет грамматические ошибки, улучшает структуру и выделяет ключевые моменты в заметках менеджера, делая информацию в CRM более чистой и полезной для всей команды.

#### **Ассистент 4: Радар рисков**
Анализирует текст переписки или заметок по сделке и выявляет потенциальные риски (например, "клиент не отвечает", "взял паузу"), помогая менеджеру своевременно отреагировать.

---
### 3. Метрика и измеримость эффекта

Эффективность решения измеряется через:
* **Сокращение времени на рутинные операции:** Автоматизация классификации, заполнения данных и редактирования позволяет экономить до **90%** времени, которое менеджер тратил на эти задачи.
* **Увеличение скорости обработки "горячих" лидов:** Мгновенная приоритизация позволяет незамедлительно связываться с самыми перспективными клиентами, что напрямую влияет на **рост конверсии** и сокращает цикл сделки.

---
### 4. Структура проекта

```
.
├── .dockerignore                   # Файлы, которые игнорируются при сборке образа Docker
├── .env                            # Переменные окружения
├── .gitignore                      # Файлы, которые игнорируются Git
├── Dockerfile                      # Инструкции для сборки Docker-образа
├── README.md                       # Этот файл
├── Описание AI-ассистента в CRM.md # Описание AI-ассистента
├── requirements.txt                # Список зависимостей Python
└── /src                            # Исходный код приложения
    ├── app.py                      # Главный файл с роутами FastAPI
    └── /assistants                 # Логика ассистентов
        ├── __init__.py             # (Пустой файл) Помечает директорию как Python-пакет
        ├── classifier.py           # Логика для ассистента-классификатора
        ├── extractor.py            # Логика для ассистента-экстрактора
        ├── editor.py               # Логика для ассистента-редактора
        └── risk_assessor.py        # Логика для радара "зависших" сделок
```

-----

### **5. Установка и запуск**

Для запуска приложения вам потребуется **Docker**.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/denis-42ds/ai_crm_assistant_challenge.git
    cd ai_crm_assistant_challenge
    ```
2.  **Соберите Docker-образ:**
    ```bash
    docker build -t crm-ai-assistant .
    ```
    *Примечание:* сборка занимает около 60 сек.
3.  **Запустите контейнер:**
    Передайте API-ключ как переменную окружения.
    ```bash
    docker run -p 8000:8000 --env API_KEY="ваш_api_ключ" crm-ai-assistant
    ```

-----

### 6. Использование API

После запуска контейнера FastAPI Swagger UI будет доступен по адресу `http://localhost:8000/docs`. Вы можете протестировать его, отправив POST-запросы на эндпоинты `/classify`, `/extract-info`, `/edit-note` и `/risk-assessment`.

-----
#### **Эндпоинт 1: `/classify`**
* **Пример запроса:**
    ```bash
    curl -X POST "http://localhost:8000/classify" \
    -H "Content-Type: application/json" \
    -d '{ "text": "Добрый день, нас интересует разработка сайта. Уже есть ТЗ, готовы обсудить детали и бюджет." }'
    ```
* **Пример ответа:**
    ```json
    {
      "classification": "Горячий"
    }
    ```
-----
#### **Эндпоинт 2: `/extract-info`**
* **Пример запроса:**
    ```bash
    curl -X POST "http://localhost:8000/extract-info" \
    -H "Content-Type: application/json" \
    -d '{ "text": "Добрый день, меня зовут Иван Петров, я из компании 'ТехноСфера'. Наша почта info@technosfera.ru." }'
    ```
* **Пример ответа:**
    ```json
    {
      "name": "Иван Петров",
      "company": "ТехноСфера",
      "email": "info@technosfera.ru"
    }
    ```
-----
#### **Эндпоинт 3: `/edit-note`**
* **Пример запроса:**
    ```bash
    curl -X POST "http://localhost:8000/edit-note" \
    -H "Content-Type: application/json" \
    -d '{ "text": "Клиент звонил сегодня, но я не успел ответить. Он просил сообщить цену и сказал что позвонит завтра. Я думаю это хороший лид." }'
    ```
* **Пример ответа:**
    ```json
    {
      "edited_note": "Клиент звонил сегодня, но я не успел ответить. Он просил сообщить цену и сказал, что позвонит завтра.\n\nКлючевые моменты:\n- Клиент звонил сегодня.\n- Запрашивает цену.\n- Перезвонит завтра.\n\nОценка: Хороший лид, требует немедленного ответа."
    }
    ```
-----
#### **Эндпоинт 4: `/risk-assessment`**
* **Пример запроса:**
    ```bash
    curl -X POST "http://localhost:8000/risk-assessment" \
    -H "Content-Type: application/json" \
    -d '{ "text": "Клиент не выходит на связь уже неделю. На прошлой неделе он попросил 'взять паузу' в общении. Сделка кажется зависшей." }'
    ```
* **Пример ответа:**
    ```json
    {
      "is_at_risk": true,
      "reason": "Клиент не выходит на связь уже неделю и попросил взять паузу."
    }
    ```
