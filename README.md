# AI CRM Assistant Service

Этот проект представляет собой демо-приложение для CRM-ассистентов на базе больших языковых моделей (LLM). Он позволяет автоматизировать рутинные задачи, такие как классификация лидов, извлечение ключевых данных, редактирование заметок и оценка рисков сделок.

Проект имеет два пользовательских интерфейса: веб-приложение и Telegram-бот.

Стек технологий

- Фронтенд: Простой HTML/CSS/JavaScript
- Бэкенд: FastAPI
- Телеграм-бот: Python Telegram Bot
- Оркестрация: Docker Compose
- Веб-сервер: Nginx

---
### 1. Проблема

Менеджеры по продажам тратят значительное время на рутинные задачи, такие как **классификация входящих лидов**, **ручное заполнение карточек клиентов**, **ведение подробных заметок** и **мониторинг рисков**. Это приводит к задержкам в обработке самых перспективных клиентов и снижает общую эффективность работы с базой.

---
### 2. Решение

Наш AI-ассистент автоматизирует эти процессы, позволяя менеджерам сосредоточиться на прямых продажах.

#### **Ассистент 1: Приоритизация лидов**
Анализирует текст входящей заявки и мгновенно присваивает ей тег **«Горячий»**, **«Тёплый»** или **«Холодный»**, обеспечивая мгновенную приоритизацию.

#### **Ассистент 2: Автозаполнение карточки клиента**
Извлекает из текста (заметок, писем) ключевую информацию, такую как имя, название компании и email, и возвращает её в структурированном виде для автоматического заполнения полей.

#### **Ассистент 3: Редактирование заметок**
Исправляет грамматические ошибки, улучшает структуру и выделяет ключевые моменты в заметках менеджера, делая информацию в CRM более чистой и полезной для всей команды.

#### **Ассистент 4: Радар рисков**
Анализирует текст переписки или заметок по сделке и выявляет потенциальные риски (например, "клиент не отвечает", "взял паузу"), помогая менеджеру своевременно отреагировать.

---
### 3. Метрика и измеримость эффекта

Эффективность решения измеряется через:
* **Сокращение времени на рутинные операции:** Автоматизация классификации, заполнения данных и редактирования позволяет экономить до **90%** времени, которое менеджер тратил на эти задачи.
* **Увеличение скорости обработки "горячих" лидов:** Мгновенная приоритизация позволяет незамедлительно связываться с самыми перспективными клиентами, что напрямую влияет на **рост конверсии** и сокращает цикл сделки.

---
### 4. Структура проекта

```
.
├── docker-compose.yml              # Конфигурация Docker Compose для запуска всех сервисов
├── nginx.conf                      # Конфигурация Nginx для маршрутизации
├── index.html                      # Фронтенд-интерфейс
├── .dockerignore                   # Файлы, которые игнорируются при сборке образа Docker
├── .env                            # Переменные окружения
├── .gitignore                      # Файлы, которые игнорируются Git
├── Dockerfile                      # Инструкции для сборки Docker-образа
├── README.md                       # Этот файл
├── Описание AI-ассистента в CRM.md # Описание AI-ассистента
├── requirements.txt                # Список зависимостей Python
└── /src                            # Исходный код приложения
    ├── app.py                      # Основной файл приложения FastAPI
    ├── telegram_bot.py             # Код Telegram-бота
    └── /assistants                 # Логика ассистентов
        ├── __init__.py             # Инициализация пакета
        ├── classifier.py           # Логика для ассистента-классификатора
        ├── extractor.py            # Логика для ассистента-экстрактора
        ├── editor.py               # Логика для ассистента-редактора
        └── risk_assessor.py        # Логика для радара "зависших" сделок
```

-----

### 5. Инструкции по запуску

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/denis-42ds/ai_crm_assistant_challenge.git
    cd ai_crm_assistant_challenge
    ```
2.  **Настройте ключи API:**
    Создайте файл .env в корневой папке проекта. Вставьте ваши ключи API.
    ```text
    API_KEY=ваш_ключ_api_для_llm
    TELEGRAM_BOT_TOKEN=токен_вашего_телеграм-бота
    ```
    *Примечание:* Для получения `TELEGRAM_BOT_TOKEN` используйте `@BotFather` в Telegram.

3.  **Запустите Docker Compose (для веб-приложения):**
    Эта команда соберёт образы и запустит все веб-сервисы (FastAPI, Nginx) в фоновом режиме.
    ```bash
    docker-compose up --build -d
    ```
4. **Остановка:**
    ```bash
    docker-compose down
    ```
-----

### 6. Использование API

  - Веб-интерфейс: доступен по адресу `http://localhost/`
  - API-документация (Swagger UI): доступна по адресу `http://localhost:8000/docs`
  - Телеграм-бот: найдите своего бота в Telegram и начните взаимодействие.

-----
#### **Эндпоинт 1: `/classify`**
* **Пример запроса:**
    ```json
    { "text": "Добрый день, нас интересует разработка сайта. Уже есть ТЗ, готовы обсудить детали и бюджет." }
    ```
* **Пример ответа:**
    ```json
    {
      "classification": "Горячий"
    }
    ```
-----
#### **Эндпоинт 2: `/extract-info`**
* **Пример запроса:**
    ```json
    { "text": "Добрый день, меня зовут Иван Петров, я из компании 'ТехноСфера'. Наша почта info@technosfera.ru." }
    ```
* **Пример ответа:**
    ```json
    {
      "name": "Иван Петров",
      "company": "ТехноСфера",
      "email": "info@technosfera.ru"
    }
    ```
-----
#### **Эндпоинт 3: `/edit-note`**
* **Пример запроса:**
    ```json
    { "text": "Звонилклиент просил сообщить цен сказал что позвонит завтра. думаю хороший лид" }
    ```
* **Пример ответа:**
    ```json
    {
      "edited_note": "Клиент звонил сегодня, но я не успел ответить. Он просил сообщить цену и сказал, что позвонит завтра.\n\nКлючевые моменты:\n- Клиент звонил сегодня.\n- Запрашивает цену.\n- Перезвонит завтра.\n\nОценка: Хороший лид, требует немедленного ответа."
    }
    ```
-----
#### **Эндпоинт 4: `/risk-assessment`**
* **Пример запроса:**
    ```json
    { "text": "Клиент не выходит на связь уже неделю. На прошлой неделе он попросил 'взять паузу' в общении. Сделка кажется зависшей." }
    ```
* **Пример ответа:**
    ```json
    {
      "is_at_risk": true,
      "reason": "Клиент не выходит на связь уже неделю и попросил взять паузу."
    }
    ```
